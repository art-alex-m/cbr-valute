# CBR Currency Api

Демонстрационное задание реализует REST сервис для получения и показа курса валют на запрошенную дату.

## Шаги по развертыванию проекта на локальной машине (Linux)

1. Распаковать проект из архива.
2. В папке проекта создать .env файл `сp .env.example .env`. И задать необходимые значения в переменных окружения в
   файле .env. Обратить внимание на соответствие значений WWWUSER, WWWGROUP с идентификатором и группой текущего
   пользователя хост машины.
3. В папке проекта из терминала запустить `docker-compose up -d`. Дождаться окончания сборки контейнеров.
4. Сборка автоматически запускает установку пакетов composer и миграции базы данных.
5. Если все закончилось без ошибок, проект доступен по ссылке `http://localhost:8085` (см. APP_URL, APP_PORT)

### Примечание 1:

Для немедленной актуализации данных по курсам валют может потребоваться вход в работающий контейнер приложения
`docker-compose exec -u $UID app bash`, и запуск команды из консоли `php artisan currency:update 2022-06-09` (либо
другая дата).
Будут запрошены данные о курсе валют с ЦБ РФ. Так же нужно очистить кеш `php artisan cache:clear`

### Примечание 2:

Сделано отступление по задаче срока кеширования. Кеш создается при первом запросе пользователя на 1 час:

- для избежания избыточного хранения кешированных данных (курс может запрашиваться на другие даты, на разные базовые
  валюты)
- для актуализации данных при изменении (например при добавлении курсов через панель администратора)
- для устранения ошибки пустого ответа (когда курс запрошен на другую дату, но срок хранения этого кеша уже истек)
- в виду вышеописанного - для упрощения алгоритма.

## Описание задачи

Платформа:
docker, Laravel 8, mySQL, фронт пусть будет любой (либо если фронта нет, то нужно описание методов API для него)

Критерий сдачи:
Архив с кодом, сервис на Laravel в docker-compose, в readme минимальная инструкция по запуску, после старта запускает
миграции и на указанном в композе порту доступна фронт-часть приложения с селектом кода валюты и выбором даты (или
аналогом через REST API)

Функциональные требования:
Страница с выбором кода базовой валюты и даты (по умолчанию RUR, сегодня) ниже таблица с курсом RUR\USD\EUR\JPY\CNY ,
отношение к базовому за выбранную дату и разница с предыдущим днём.
Данные обновляются с cbr.ru ночью в 00:00 и кэшируются на целый день

